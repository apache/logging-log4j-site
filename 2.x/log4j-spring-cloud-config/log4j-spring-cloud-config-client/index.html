<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<!-- Generated by Apache Maven Doxia at 2019-06-23 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Log4j Spring Cloud Config Integration &#x2013; Log4j Spring Cloud Configuration - Apache Log4j Spring Cloud Config Client Support</title>
		<link rel="stylesheet" href="./css/bootstrap.min.css" type="text/css" />
		<link rel="stylesheet" href="./css/site.css" type="text/css" />
		<script type="text/javascript" src="./js/jquery.min.js"></script>
		<script type="text/javascript" src="./js/bootstrap.min.js"></script>
		<script type="text/javascript" src="./js/prettify.min.js"></script>
		<script type="text/javascript" src="./js/site.js"></script>
		<meta name="Date-Revision-yyyymmdd" content="20190623" />
		<meta http-equiv="Content-Language" content="en" />
		
				</head>
	<body class="composite">
		<a href="https://logging.apache.org/">
			<img class="logo-left" src="./images/ls-logo.jpg" alt="Apache logging services logo" />
		</a>
		<img class="logo-right" src="./images/logo.png" alt="Apache log4j logo" />
		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://maven.apache.org/log4j-spring-cloud-config-client">Apache Log4j Spring Cloud Config Client Support &trade;</a>
						<ul class="nav">
						<li>
					
				
				<a href="https://cwiki.apache.org/confluence/display/LOGGING/Log4j" class="external" target="_blank" title="Logging Wiki">Logging Wiki</a>
			</li>
					<li>
					
				
				<a href="https://www.apache.org/" class="external" target="_blank" title="Apache">Apache</a>
			</li>
					<li>
					
				
				<a href="https://logging.apache.org/" class="external" target="_blank" title="Logging Services">Logging Services</a>
			</li>
					<li>
					
				
				<a href="https://analysis.apache.org/dashboard/index/org.apache.logging.log4j:log4j" class="external" target="_blank" title="Sonar">Sonar</a>
			</li>
					<li>
					
				
				<a href="https://github.com/apache/logging-log4j2" class="external" target="_blank" title="GitHub">GitHub</a>
			</li>
					<li>
					
				
				<a href="http://www.apache.org/" class="external" target="_blank" title="Apache">Apache</a>
			</li>
					<li>
					
				
				<a href="http://logging.apache.org/" class="external" target="_blank" title="Logging Services">Logging Services</a>
			</li>
					<li>
									<a href="../index.html" title="Log4j">Log4j</a>
			</li>
		</ul>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-home"></i>Apache Log4jâ„¢ 2</li>
																						<li class="none">
									<a href="../../index.html" title="About">About</a>
					</li>
 																<li class="none">
									<a href="../../download.html" title="Download">Download</a>
					</li>
 																																																																				<li class="collapsed">
									<a href="../../javadoc.html" title="Javadoc">Javadoc</a>
										</li>
 																																																																																															<li class="collapsed">
									<a href="../../maven-artifacts.html" title="Maven, Ivy, Gradle Artifacts">Maven, Ivy, Gradle Artifacts</a>
										</li>
 																<li class="none">
									<a href="../../runtime-dependencies.html" title="Runtime Dependencies">Runtime Dependencies</a>
					</li>
 																<li class="none">
									<a href="../../changelog.html" title="Changelog">Changelog</a>
					</li>
 																<li class="none">
									<a href="../../faq.html" title="FAQ">FAQ</a>
					</li>
 																																																																																																																	<li class="collapsed">
									<a href="../../performance.html" title="Performance">Performance</a>
										</li>
 																<li class="none">
									<a href="../../articles.html" title="Articles and Tutorials">Articles and Tutorials</a>
					</li>
 																<li class="none">
									<a href="../../thanks.html" title="Thanks">Thanks</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-pencil"></i>For Contributors</li>
																						<li class="none">
									<a href="../../build.html" title="Building Log4j from Source">Building Log4j from Source</a>
					</li>
 																<li class="none">
									<a href="../../guidelines.html" title="Guidelines">Guidelines</a>
					</li>
 																<li class="none">
									<a href="../../javastyle.html" title="Style Guide">Style Guide</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-book"></i>Manual</li>
																						<li class="none">
									<a href="../../manual/index.html" title="Introduction">Introduction</a>
					</li>
 																<li class="none">
									<a href="../../manual/architecture.html" title="Architecture">Architecture</a>
					</li>
 																<li class="none">
									<a href="../../manual/migration.html" title="Log4j 1.x Migration">Log4j 1.x Migration</a>
					</li>
 																																																																													<li class="collapsed">
									<a href="../../manual/api.html" title="Java API">Java API</a>
										</li>
 																<li class="none">
									<a href="../../manual/scala-api.html" title="Scala API">Scala API</a>
					</li>
 																																																																																																																																																																																																																				<li class="collapsed">
									<a href="../../manual/configuration.html" title="Configuration">Configuration</a>
										</li>
 																																																											<li class="collapsed">
									<a href="../../manual/usage.html" title="Usage">Usage</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../../manual/webapp.html" title="Web Applications and JSPs">Web Applications and JSPs</a>
										</li>
 																																																																																																																																																					<li class="collapsed">
									<a href="../../manual/lookups.html" title="Lookups">Lookups</a>
										</li>
 																																																																																																																																																																																																																																																																																																					<li class="collapsed">
									<a href="../../manual/appenders.html" title="Appenders">Appenders</a>
										</li>
 																																																																																																																																			<li class="collapsed">
									<a href="../../manual/layouts.html" title="Layouts">Layouts</a>
										</li>
 																																																																																																																																			<li class="collapsed">
									<a href="../../manual/filters.html" title="Filters">Filters</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../../manual/async.html" title="Async Loggers">Async Loggers</a>
										</li>
 																																																																																																								<li class="collapsed">
									<a href="../../manual/garbagefree.html" title="Garbage-free Logging">Garbage-free Logging</a>
										</li>
 																<li class="none">
									<a href="../../manual/jmx.html" title="JMX">JMX</a>
					</li>
 																<li class="none">
									<a href="../../manual/logsep.html" title="Logging Separation">Logging Separation</a>
					</li>
 																																																																																																																																																														<li class="collapsed">
									<a href="../../manual/extending.html" title="Extending Log4j">Extending Log4j</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../../manual/plugins.html" title="Plugins">Plugins</a>
										</li>
 																																																																																															<li class="collapsed">
									<a href="../../manual/customconfig.html" title="Programmatic Log4j Configuration">Programmatic Log4j Configuration</a>
										</li>
 																																																																																						<li class="collapsed">
									<a href="../../manual/customloglevels.html" title="Custom Log Levels">Custom Log Levels</a>
										</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-tags"></i>Related Projects</li>
																						<li class="none">
					
				
				<a href="http://logging.apache.org/log4j/scala/index.html" class="external" target="_blank" title="Log4j-Scala">Log4j-Scala</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-tags"></i>Legacy</li>
																						<li class="none">
					
				
				<a href="http://logging.apache.org/log4j/1.2/" class="external" target="_blank" title="Log4j 1.2">Log4j 1.2</a>
					</li>
 																<li class="none">
					
				
				<a href="http://logging.apache.org/log4j/log4j-2.3/" class="external" target="_blank" title="Log4j 2.3">Log4j 2.3</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-cog"></i>Components</li>
																						<li class="none">
									<a href="../../log4j-api/index.html" title="API">API</a>
					</li>
 																<li class="none">
									<a href="../../log4j-core/index.html" title="Implementation">Implementation</a>
					</li>
 																<li class="none">
									<a href="../../log4j-jcl/index.html" title="Commons Logging Bridge">Commons Logging Bridge</a>
					</li>
 																<li class="none">
									<a href="../../log4j-1.2-api/index.html" title="Log4j 1.2 API">Log4j 1.2 API</a>
					</li>
 																<li class="none">
									<a href="../../log4j-slf4j-impl/index.html" title="SLF4J Binding">SLF4J Binding</a>
					</li>
 																<li class="none">
									<a href="../../log4j-jul/index.html" title="JUL Adapter">JUL Adapter</a>
					</li>
 																<li class="none">
									<a href="../../log4j-to-slf4j/index.html" title="Log4j 2 to SLF4J Adapter">Log4j 2 to SLF4J Adapter</a>
					</li>
 																<li class="none">
									<a href="../../log4j-flume-ng/index.html" title="Apache Flume Appender">Apache Flume Appender</a>
					</li>
 																<li class="none">
									<a href="../../log4j-taglib/index.html" title="Log4j Tag Library">Log4j Tag Library</a>
					</li>
 																<li class="none">
									<a href="../../log4j-jmx-gui/index.html" title="Log4j JMX GUI">Log4j JMX GUI</a>
					</li>
 																<li class="none">
									<a href="../../log4j-web/index.html" title="Log4j Web Application Support">Log4j Web Application Support</a>
					</li>
 																<li class="none">
									<a href="../../log4j-appserver/index.html" title="Log4j Application Server Integration">Log4j Application Server Integration</a>
					</li>
 																<li class="none">
									<a href="../../log4j-couchdb/index.html" title="Log4j CouchDB appender">Log4j CouchDB appender</a>
					</li>
 																<li class="none">
									<a href="../../log4j-mongodb2/index.html" title="Log4j MongoDB2 appender">Log4j MongoDB2 appender</a>
					</li>
 																<li class="none">
									<a href="../../log4j-mongodb3/index.html" title="Log4j MongoDB3 appender">Log4j MongoDB3 appender</a>
					</li>
 																<li class="none">
									<a href="../../log4j-cassandra/index.html" title="Log4j Cassandra appender">Log4j Cassandra appender</a>
					</li>
 																<li class="none">
									<a href="../../log4j-iostreams/index.html" title="Log4j IO Streams">Log4j IO Streams</a>
					</li>
 																<li class="none">
									<a href="../../log4j-liquibase/index.html" title="Log4j Liquibase Binding">Log4j Liquibase Binding</a>
					</li>
 																<li class="none">
									<a href="../../log4j-docker/index.html" title="Log4j Docker Support">Log4j Docker Support</a>
					</li>
 																<li class="none">
									<a href="../../log4j-spring-cloud-config/log4j-spring-cloud-config-client/index.html" title="Log4j Spring Cloud Config Client">Log4j Spring Cloud Config Client</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 														 <li class="nav-header">Component Documentation</li>
																																																																																																																																																<li class="expanded">
									<a href="project-info.html" title="Component Information">Component Information</a>
										<ul>
																						<li class="none active">
									<a href="index.html" title="About">About</a>
					</li>
 																						<li class="none">
									<a href="dependencies.html" title="Dependencies">Dependencies</a>
					</li>
 																						<li class="none">
									<a href="dependency-info.html" title="Dependency Information">Dependency Information</a>
					</li>
 																						<li class="none">
									<a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a>
					</li>
 																						<li class="none">
									<a href="dependency-management.html" title="Dependency Management">Dependency Management</a>
					</li>
 																	<!-- Removing overall project item Team from component-specific menu -->
																	<!-- Removing overall project item Mailing Lists from component-specific menu -->
																	<!-- Removing overall project item Issue Management from component-specific menu -->
																	<!-- Removing overall project item Licenses from component-specific menu -->
																	<!-- Removing overall project item Source Code Management from component-specific menu -->
																						<li class="none">
									<a href="project-summary.html" title="Summary">Summary</a>
					</li>
 										</ul>
							</li>
 																																																																																																										<li class="collapsed">
									<a href="project-reports.html" title="Component Reports">Component Reports</a>
										</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-info-sign"></i>Log4j Project Information</li>
																						<li class="none">
									<a href="../dependencies.html" title="Dependencies">Dependencies</a>
					</li>
 																<li class="none">
									<a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a>
					</li>
 																<li class="none">
									<a href="../dependency-management.html" title="Dependency Management">Dependency Management</a>
					</li>
 																<li class="none">
									<a href="../team-list.html" title="Project Team">Project Team</a>
					</li>
 																<li class="none">
									<a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
					</li>
 																<li class="none">
									<a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
					</li>
 																<li class="none">
									<a href="../license.html" title="Project License">Project License</a>
					</li>
 																<li class="none">
									<a href="../source-repository.html" title="Source Repository">Source Repository</a>
					</li>
 																<li class="none">
									<a href="../project-summary.html" title="Project Summary">Project Summary</a>
					</li>
 								</ul>
			<ul class="nav nav-list">
		 											 <li class="nav-header"><i class="icon-cog"></i>Log4j Project Reports</li>
																						<li class="none">
									<a href="../changes-report.html" title="Changes Report">Changes Report</a>
					</li>
 																<li class="none">
									<a href="../jira-report.html" title="JIRA Report">JIRA Report</a>
					</li>
 																<li class="none">
									<a href="../surefire-report.html" title="Surefire Report">Surefire Report</a>
					</li>
 																<li class="none">
									<a href="../rat-report.html" title="RAT Report">RAT Report</a>
					</li>
 								</ul>
							</div>
						<div id="poweredBy">
															<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
				<img class="poweredBy" alt="Built by Maven" src="./images/maven-feather.png" />
			</a>
									</div>
					</td>
					<td class="content">
						<!-- vim: set syn=markdown : -->
<!-- Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. --><h1>Log4j Spring Cloud Configuration</h1>
<p>This module allows logging configuration files to be dynamically updated when new versions are available in Spring Cloud Configuration. </p>
<div class="section">
<h2><a name="Overview"></a>Overview</h2>
<p>Spring Boot applications initialize logging 3 times. 1. SpringApplication declares a Logger. This Logger will be initialized using Log4j&#x2019;s &#x201c;normal&#x201d; mechanisms. Thus a system property named log4j2.configurationFile will be checked to see if a specific configuration file has been provided, otherwise it will search for a configuration file on the classpath. The property may also be declare in log4j2.component.properties. </p></div>
<div class="section">
<h2><a name="Usage"></a>Usage</h2>
<p>Log4j configuration files that specify a monitor interval of greater than zero will use polling to determine whether the configuration has been updated. If the monitor interval is zero then Log4j will listen for notifications from Spring Cloud Config and will check for configuration changes each time an event is generated. If the monitor interval is less than zero Log4j will not check for changes to the logging configuration.</p>
<p>When referencing a configuration located in Spring Cloud Config the configuration should be referenced similar to</p>

<div class="source">
<div class="source">
<pre>log4j.configurationFile=http://host.docker.internal:8888/ConfigService/sampleapp/default/master/log4j2.xml
</pre></div></div>
<p>When running in a docker container host.docker.internal may be used as the domain name to access an application running on the same hose outside of the docker container. Note that in accordance with Spring Cloud Config practices but the application, profile, and label should be specified in the url.</p>
<p>The Spring Cloud Config support also allows connections using TLS and/or basic authentication. When using basic authentication the userid and password may be specified as system properties or in log4j2.component.properties as</p>

<div class="source">
<div class="source">
<pre>log4j2.configurationUserName=guest
log4j2.configurationPassword=guest
</pre></div></div>
<p>Note that Log4j currently does not support encrypting the password. </p>
<p>If more extensive authentication is required an <tt>AuthorizationProvider</tt> can be implemented and defined in the log4j2.authorizationProvider system property or in log4j2.component.properties.</p>
<p>TLS can be enabled by adding the following system properties or defining them in log4j2.component.properties</p>

<table border="0" class="bodyTable">
  <thead>
    
<tr class="a">
      
<th>Property </th>
      
<th>Optional or Default Value </th>
      
<th align="left">Description </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>log4j2.trustStoreLocation </td>
      
<td>Optional </td>
      
<td align="left">The location of the trust store. If not provided the default trust store will be used.</td>
    </tr>
    
<tr class="a">
      
<td>log4j2.trustStorePassword </td>
      
<td>Optional </td>
      
<td align="left">Password needed to access the trust store. </td>
    </tr>
    
<tr class="b">
      
<td>log4j2.trustStorePasswordFile </td>
      
<td>Optinoal </td>
      
<td align="left">The location of a file that contains the password for the trust store. </td>
    </tr>
    
<tr class="a">
      
<td>log4j2.trustStorePasswordEnvironmentVariable </td>
      
<td>Optional </td>
      
<td align="left">The name of the environment variable that contains the trust store password. </td>
    </tr>
    
<tr class="b">
      
<td>log4j2.trustStoreKeyStoreType </td>
      
<td>Required if keystore location provided </td>
      
<td align="left">The type of key store. </td>
    </tr>
    
<tr class="a">
      
<td>log4j2.trustStoreKeyManagerFactoryAlgorithm </td>
      
<td>Optional </td>
      
<td align="left">Java cryptographic algorithm. </td>
    </tr>
    
<tr class="b">
      
<td>log4j2.keyStoreLocation </td>
      
<td>Optional </td>
      
<td align="left">The location of the key store. If not provided the default key store will be used.</td>
    </tr>
    
<tr class="a">
      
<td>log4j2.keyStorePassword </td>
      
<td>Optional </td>
      
<td align="left">Password needed to access the key store. </td>
    </tr>
    
<tr class="b">
      
<td>log4j2.keyStorePasswordFile </td>
      
<td>Optional </td>
      
<td align="left">The location of a file that contains the password for the key store. </td>
    </tr>
    
<tr class="a">
      
<td>log4j2.keyStorePasswordEnvironmentVariable </td>
      
<td>Optional </td>
      
<td align="left">The name of the environment variable that contains the key store password.</td>
    </tr>
    
<tr class="b">
      
<td>log4j2.keyStoreType </td>
      
<td>Required if trust store location provided. </td>
      
<td align="left">The type of key store. </td>
    </tr>
    
<tr class="a">
      
<td>log4j2.keyStoreKeyManagerFactoryAlgorithm </td>
      
<td>Optional </td>
      
<td align="left">Java cryptographic algorithm. </td>
    </tr>
    
<tr class="b">
      
<td>log4j2.sslVerifyHostName </td>
      
<td>false </td>
      
<td align="left">true or false </td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h2><a name="Requirements"></a>Requirements</h2>
<p>The Log4j 2 Spring Cloud Configuration integration has a dependency on Log4j 2 API, Log4j 2 Core, and Spring Cloud Configuration versions 2.0.3.RELEASE or 2.1.1.RELEASE or later versions it either release series. For more information, see <a href="../../runtime-dependencies.html">Runtime Dependencies</a>.</p></div>
					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
							<p>Copyright &copy; 1999-2019 <a class="external" href="https://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</p>
				<p>Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.</p>
				<p>Site powered by <a class="external" href="http://getbootstrap.com/">Twitter Bootstrap</a>. Icons from <a class="external" href="http://glyphicons.com/">Glyphicons Free</a>.</p>
			</div>
		</div>
	</body>
</html>
