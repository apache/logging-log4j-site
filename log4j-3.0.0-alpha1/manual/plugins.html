<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from target/generated-sources/site/asciidoc/manual/plugins.adoc at 2023-06-03
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Log4j &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://logging.apache.org" id="bannerLeft"><img src="../images/ls-logo.jpg"  alt=""/></a></div>
          <div class="pull-right"><a href="http://logging.apache.org/log4j/3.x" id="bannerRight"><img src="../images/logo.png"  alt=""/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-06-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.0.0-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/apache/logging-log4j2" class="externalLink" title="GitHub">GitHub</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://analysis.apache.org/dashboard/index/org.apache.logging.log4j:log4j" class="externalLink" title="Sonar">Sonar</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="../../../" title="Logging Services">Logging Services</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://www.apache.org/" class="externalLink" title="Apache">Apache</a></li>
      <li class="pull-right"><a href="https://cwiki.apache.org/confluence/display/LOGGING/Log4j" class="externalLink" title="Logging Wiki">Logging Wiki</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/home.png" alt="Apache Log4j™ 3.x" border="0"/> Apache Log4j™ 3.x</li>
    <li><a href="../index.html" title="About"><span class="none"></span>About</a></li>
    <li><a href="../download.html" title="Download"><span class="none"></span>Download</a></li>
    <li><a href="../javadoc.html" title="Javadoc"><span class="none"></span>Javadoc</a></li>
    <li><a href="../maven-artifacts.html" title="Maven, Ivy, Gradle Artifacts"><span class="icon-chevron-right"></span>Maven, Ivy, Gradle Artifacts</a></li>
    <li><a href="../runtime-dependencies.html" title="Runtime Dependencies"><span class="none"></span>Runtime Dependencies</a></li>
    <li><a href="../release-notes/" title="Release Notes"><span class="none"></span>Release Notes</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="../performance.html" title="Performance"><span class="icon-chevron-right"></span>Performance</a></li>
    <li><a href="../articles.html" title="Articles and Tutorials"><span class="none"></span>Articles and Tutorials</a></li>
    <li><a href="../security.html" title="Security"><span class="none"></span>Security</a></li>
    <li><a href="../support.html" title="Support"><span class="none"></span>Support</a></li>
    <li><a href="../thanks.html" title="Thanks"><span class="none"></span>Thanks</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/pencil.png" alt="For Contributors" border="0"/> For Contributors</li>
    <li><a href="../guidelines.html" title="Guidelines"><span class="none"></span>Guidelines</a></li>
    <li><a href="../javastyle.html" title="Style Guide"><span class="none"></span>Style Guide</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/book.png" alt="Manual" border="0"/> Manual</li>
    <li><a href="../manual/index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../manual/architecture.html" title="Architecture"><span class="none"></span>Architecture</a></li>
    <li><a href="../manual/compatibility.html" title="Log4j 1.x Compatibility"><span class="none"></span>Log4j 1.x Compatibility</a></li>
    <li><a href="../manual/migration.html" title="Log4j 1.x Migration"><span class="none"></span>Log4j 1.x Migration</a></li>
    <li><a href="../manual/api.html" title="Java API"><span class="icon-chevron-right"></span>Java API</a></li>
    <li><a href="../manual/scala-api.html" title="Scala API"><span class="none"></span>Scala API</a></li>
    <li><a href="../manual/configuration.html" title="Configuration"><span class="icon-chevron-right"></span>Configuration</a></li>
    <li><a href="../manual/usage.html" title="Usage"><span class="icon-chevron-right"></span>Usage</a></li>
    <li><a href="../manual/webapp.html" title="Web Applications and JSPs"><span class="icon-chevron-right"></span>Web Applications and JSPs</a></li>
    <li><a href="../manual/lookups.html" title="Lookups"><span class="icon-chevron-right"></span>Lookups</a></li>
    <li><a href="../manual/appenders.html" title="Appenders"><span class="icon-chevron-right"></span>Appenders</a></li>
    <li><a href="../manual/layouts.html" title="Layouts"><span class="icon-chevron-right"></span>Layouts</a></li>
    <li><a href="../manual/filters.html" title="Filters"><span class="icon-chevron-right"></span>Filters</a></li>
    <li><a href="../manual/async.html" title="Async Loggers"><span class="icon-chevron-right"></span>Async Loggers</a></li>
    <li><a href="../manual/garbagefree.html" title="Garbage-free Logging"><span class="icon-chevron-right"></span>Garbage-free Logging</a></li>
    <li><a href="../manual/jmx.html" title="JMX"><span class="none"></span>JMX</a></li>
    <li><a href="../manual/logsep.html" title="Logging Separation"><span class="none"></span>Logging Separation</a></li>
    <li><a href="../manual/extending.html" title="Extending Log4j"><span class="icon-chevron-right"></span>Extending Log4j</a></li>
    <li class="active"><a href="#"><span class="icon-chevron-down"></span>Plugins</a>
     <ul class="nav nav-list">
      <li><a href="../manual/plugins.html#Core" title="Core"><span class="none"></span>Core</a></li>
      <li><a href="../manual/plugins.html#Converters" title="Converters"><span class="none"></span>Converters</a></li>
      <li><a href="../manual/plugins.html#KeyProviders" title="Key Providers"><span class="none"></span>Key Providers</a></li>
      <li><a href="../manual/plugins.html#Lookups" title="Lookups"><span class="none"></span>Lookups</a></li>
      <li><a href="../manual/plugins.html#TypeConverters" title="Type Converters"><span class="none"></span>Type Converters</a></li>
      <li><a href="../manual/plugins.html#DeveloperNotes" title="Developer Notes"><span class="none"></span>Developer Notes</a></li>
     </ul></li>
    <li><a href="../manual/customconfig.html" title="Programmatic Log4j Configuration"><span class="icon-chevron-right"></span>Programmatic Log4j Configuration</a></li>
    <li><a href="../manual/customloglevels.html" title="Custom Log Levels"><span class="icon-chevron-right"></span>Custom Log Levels</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/tag.png" alt="Related Projects" border="0"/> Related Projects</li>
    <li><a href="http://logging.apache.org/log4j/scala/index.html" class="externalLink" title="Log4j-Scala"><span class="none"></span>Log4j-Scala</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/link.png" alt="Legacy" border="0"/> Legacy</li>
    <li><a href="http://logging.apache.org/log4j/1.2/" class="externalLink" title="Log4j 1.2 - End of Life"><span class="none"></span>Log4j 1.2 - End of Life</a></li>
    <li><a href="http://logging.apache.org/log4j/log4j-2.3/" class="externalLink" title="Log4j 2.3 - Java 6"><span class="none"></span>Log4j 2.3 - Java 6</a></li>
    <li><a href="http://logging.apache.org/log4j/log4j-2.12.1/" class="externalLink" title="Log4j 2.12.1 - Java 7"><span class="none"></span>Log4j 2.12.1 - Java 7</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/cog.png" alt="Components" border="0"/> Components</li>
    <li><a href="../log4j-api.html" title="API"><span class="none"></span>API</a></li>
    <li><a href="../log4j-core.html" title="Implementation"><span class="none"></span>Implementation</a></li>
    <li><a href="../log4j-jcl.html" title="Commons Logging Bridge"><span class="none"></span>Commons Logging Bridge</a></li>
    <li><a href="../log4j-1.2-api.html" title="Log4j 1.2 API"><span class="none"></span>Log4j 1.2 API</a></li>
    <li><a href="../log4j-slf4j-impl.html" title="SLF4J Binding"><span class="none"></span>SLF4J Binding</a></li>
    <li><a href="../log4j-jul.html" title="JUL Adapter"><span class="none"></span>JUL Adapter</a></li>
    <li><a href="../log4j-jpl.html" title="JDK Platform Logger"><span class="none"></span>JDK Platform Logger</a></li>
    <li><a href="../log4j-to-slf4j.html" title="Log4j 2 to SLF4J Adapter"><span class="none"></span>Log4j 2 to SLF4J Adapter</a></li>
    <li><a href="../log4j-jdbc-dbcp2.html" title="JDBC Appender"><span class="none"></span>JDBC Appender</a></li>
    <li><a href="../log4j-jeromq.html" title="ZeroMQ Appender"><span class="none"></span>ZeroMQ Appender</a></li>
    <li><a href="../log4j-flume-ng.html" title="Apache Flume Appender"><span class="none"></span>Apache Flume Appender</a></li>
    <li><a href="../log4j-jms.html" title="JMS Appender"><span class="none"></span>JMS Appender</a></li>
    <li><a href="../log4j-taglib.html" title="Tag Library"><span class="none"></span>Tag Library</a></li>
    <li><a href="../log4j-jmx-gui.html" title="JMX GUI"><span class="none"></span>JMX GUI</a></li>
    <li><a href="../log4j-web.html" title="Web Application Support"><span class="none"></span>Web Application Support</a></li>
    <li><a href="../log4j-jakarta-web.html" title="Jakarta Web Application Support"><span class="none"></span>Jakarta Web Application Support</a></li>
    <li><a href="../log4j-appserver.html" title="Application Server Integration"><span class="none"></span>Application Server Integration</a></li>
    <li><a href="../log4j-couchdb.html" title="CouchDB appender"><span class="none"></span>CouchDB appender</a></li>
    <li><a href="../log4j-mongodb3.html" title="MongoDB3 appender"><span class="none"></span>MongoDB3 appender</a></li>
    <li><a href="../log4j-mongodb4.html" title="MongoDB4 appender"><span class="none"></span>MongoDB4 appender</a></li>
    <li><a href="../log4j-cassandra.html" title="Cassandra appender"><span class="none"></span>Cassandra appender</a></li>
    <li><a href="../log4j-iostreams.html" title="IO Streams"><span class="none"></span>IO Streams</a></li>
    <li><a href="../log4j-liquibase.html" title="Liquibase Binding"><span class="none"></span>Liquibase Binding</a></li>
    <li><a href="../log4j-docker.html" title="Docker Support"><span class="none"></span>Docker Support</a></li>
    <li><a href="../log4j-kubernetes.html" title="Kubernetes Support"><span class="none"></span>Kubernetes Support</a></li>
    <li><a href="../log4j-spring-boot.html" title="Log4j Spring Boot"><span class="none"></span>Log4j Spring Boot</a></li>
    <li><a href="../log4j-spring-cloud-config-client.html" title="Spring Cloud Config Client"><span class="none"></span>Spring Cloud Config Client</a></li>
    <li><a href="../log4j-transform" title="Log4j Transformation Tools"><span class="none"></span>Log4j Transformation Tools</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/info.png" alt="Project Information" border="0"/> Project Information</li>
    <li><a href="../team.html" title="Project Team"><span class="none"></span>Project Team</a></li>
    <li><a href="https://www.apache.org/licenses/LICENSE-2.0" class="externalLink" title="Project License"><span class="none"></span>Project License</a></li>
    <li><a href="https://github.com/apache/logging-log4j2/tree/main" class="externalLink" title="Source Repository"><span class="none"></span>Source Repository</a></li>
   <li class="nav-header"><img class="imageLink" src="../img/glyphicons/layers.png" alt="Project Reports" border="0"/> Project Reports</li>
    <li><a href="../rat-report.html" title="RAT Report"><span class="none"></span>RAT Report</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Plugins</h1>
<div id="preamble">
<div class="sectionbody">
<link rel="stylesheet" type="text/css" href="../css/tables.css">
<div class="paragraph">
<p>Log4j 1.x allowed for extension by requiring class attributes on most of
the configuration declarations. In the case of some elements, notably
the PatternLayout, the only way to add new pattern converters was to
extend the PatternLayout class and add them via code. One goal of Log4j
2 is to make extending it extremely easy through the use of plugins.</p>
</div>
<div class="paragraph">
<p>In Log4j 3.x, a plugin is declared by adding a <a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/Plugin.html"><code>@Plugin</code></a> and <code>@Namespace</code> annotation to the class declaration.
During initialization the
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/config/Configuration.html"><code>Configuration</code></a>
will invoke the
<a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/util/PluginRegistry.html"><code>PluginRegistry</code></a>
to load the built-in Log4j plugins as well as any custom plugins. The
<code>Injector</code> locates plugins by looking in the following places:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Plugin collection classes on the classpath that are loaded by java.util.ServiceLoader.
These classes are generated automatically during the build (more details below).</p>
</li>
<li>
<p>(OSGi only) Serialized plugin listing files in each active OSGi
bundle. A <code>BundleListener</code> is added on activation to continue checking
new bundles after <code>log4j-plugins</code> has started. Bundles must register their plugin collection
class as an OSGi service.</p>
</li>
<li>
<p>Serialized plugin listing files on the classpath. These files were generated by
the plugin annotation processor in Log4j 2 2.x. These are processed to allow
compatibility.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When multiple plugins use the same case-insensitive <code>name</code> within the same plugin category, then which one is selected is determined first by the presence of <code>@PluginOrder</code> annotations and then by the previously described plugin loading order.
For example, to override the <code>File</code> plugin which is provided by the built-in <code>FileAppender</code> class, you would need to place your plugin in a JAR file in the CLASSPATH ahead of`log4j-core.jar`.
This is not recommended; plugin name collisions will cause a warning to be emitted.
Note that in an OSGi environment, the order that bundles are scanned for plugins generally follows the same order that bundles were installed into the framework.
See <a href="https://www.osgi.org/javadoc/r5/core/org/osgi/framework/BundleContext.html#getBundles()"><code>getBundles()</code></a> and <a href="https://www.osgi.org/javadoc/r5/core/org/osgi/framework/SynchronousBundleListener.html"><code>SynchronousBundleListener</code></a>.
In short, name collisions are even more unpredictable in an OSGi environment without additional <code>@PluginOrder</code> usage.</p>
</div>
<div class="paragraph">
<p>Plugin collection classes are generated by an annotation processor contained
in the log4j-plugins artifact which will automatically scan your code for
Log4j 2 plugins and generate a Java source file that references all the
located plugins. It will also generate a
META-INF/services/org.apache.logging.log4j.plugins.model.PluginService
file in compliance with java.util.ServiceLoader.
There is nothing extra that needs to be done to enable this;
the Java compiler will automatically pick up the annotation processor on
the class path unless you explicitly disable it.</p>
</div>
<div class="paragraph">
<p>If annotation processing is disabled plugins may still be registered by either</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>manually providing a class that extends <code>org.apache.logging.log4j.plugins.model.PluginService</code>
and identifies all the plugins and also declaring a
<code>META-INF/services/org.apache.logging.log4j.plugins.model.PluginService</code> file
that provides the fully qualified name of the implemented class or</p>
</li>
<li>
<p>adding another compiler pass to the build process that
only handles annotation processing using the Log4j 2 annotation
processor class,
<code>org.apache.logging.log4j.plugin.processor.PluginProcessor</code>.
To do this using Apache Maven, add the following execution to your
<em>maven-compiler-plugin</em> (version 2.2 or higher) build plugin:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.1&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;log4j-plugin-processor&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;compile&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;phase&gt;process-classes&lt;/phase&gt;
      &lt;configuration&gt;
        &lt;proc&gt;only&lt;/proc&gt;
        &lt;annotationProcessors&gt;
          &lt;annotationProcessor&gt;org.apache.logging.log4j.plugin.processor.PluginProcessor&lt;/annotationProcessor&gt;
        &lt;/annotationProcessors&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the configuration is processed the appropriate plugins will be
automatically configured and initialized.</p>
</div>
<div class="paragraph">
<p>Log4j 3 utilizes a few different namespaces of plugins which are described in the following sections.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Core">Core</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Core plugins are those that are directly represented by an element in a
configuration file and correspond to <code>@Configurable</code> namespaced <code>@Plugin</code> classes such as an <code>Appender</code>, <code>Layout</code>, <code>Logger</code> or <code>Filter</code>.
Custom plugins that conform to the rules laid out in the next paragraph may simply be referenced in the configuration.</p>
</div>
<div class="paragraph">
<p>Core plugins support a few different dependency injection rules for binding configuration node data and other injectable classes into a plugin instance.
Each plugin must declare a static method annotated with <code>@Factory</code> or <code>@PluginFactory</code> or contain an <code>@Inject</code>-annotated constructor or no-args constructor.
These static factory method or <code>@Inject</code> constructor parameters are used for initial dependency injection.
When a static factory method returns a type that implements <code>java.util.function.Supplier&lt;T&gt;</code> such as through <code>Builder&lt;T&gt;</code>, then that supplier instance first has its members injected before invoking <code>Supplier::get</code> to obtain the resulting plugin instance.
See <a href="./dependencyinjection.html">Dependency Injection</a> for further details on how dependency injection works.
Plugins are configured using additional plugin qualifier annotations such as <code>@PluginAttribute</code>, <code>@PluginBuilderAttribute</code>, <code>@PluginElement</code>, <code>@PluginValue</code>, etc., as described below.</p>
</div>
<div class="paragraph">
<p>There are dozens of plugins in Log4j Core that can be
used as examples for more complex scenarios including hierarchical
builder classes (e.g., see <code>FileAppender</code>). See
<a href="extending.html#Plugin_Builders">Extending Log4j with Plugin
Builders</a> for more details.</p>
</div>
<div class="sect2">
<h3 id="attribute_types">Attribute Types</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/PluginAttribute.html"><code>PluginAttribute</code></a></dt>
<dd>
<p>The parameter must be convertible from a String using a
<a href="#TypeConverters">TypeConverter</a>. Most built-in types are already
supported, but custom <code>TypeConverter</code> plugins may also be provided for
more type support. Note that <code>PluginBuilderAttribute</code> can be used in
builder class fields as an easier way to provide default values.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/PluginElement.html"><code>PluginElement</code></a></dt>
<dd>
<p>The parameter may represent a complex object that itself has
parameters that can be configured. This also supports injecting an
array of elements.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-core/apidocs/org/apache/logging/log4j/core/config/plugins/PluginConfiguration.html"><code>PluginConfiguration</code></a></dt>
<dd>
<p>The current <code>Configuration</code> object will be passed to the plugin as a
parameter.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/PluginNode.html"><code>PluginNode</code></a></dt>
<dd>
<p>The current <code>Node</code> being parsed will be passed to the plugin as a
parameter.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/PluginValue.html"><code>PluginValue</code></a></dt>
<dd>
<p>The value of the current <code>Node</code> or its attribute named <code>value</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="constraint_validators">Constraint Validators</h3>
<div class="paragraph">
<p>Plugin factory fields, methods, and parameters can be automatically validated at
runtime using constraint validators inspired by the
<a href="http://beanvalidation.org/">Bean Validation spec</a>. The following
annotations are bundled in Log4j, but custom
<a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/validation/ConstraintValidator.html"><code>ConstraintValidators</code></a>
can be created as well.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/validation/constraints/Required.html"><code>Required</code></a></dt>
<dd>
<p>This annotation validates that a value is non-empty. This covers a
check for <code>null</code> as well as several other scenarios: empty
<code>CharSequence</code> objects, empty arrays, empty <code>Collection</code> instances,
and empty <code>Map</code> instances.</p>
</dd>
<dt class="hdlist1"><code>RequiredClass</code></dt>
<dd>
<p>This annotation validates that a class name can be loaded. This is useful for plugins that should only be loaded when an optional class is present.</p>
</dd>
<dt class="hdlist1"><code>RequiredProperty</code></dt>
<dd>
<p>This annotation validates that a system property is set to some value.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/validation/constraints/ValidHost.html"><code>ValidHost</code></a></dt>
<dd>
<p>This annotation validates that a value corresponds to a valid
hostname. This uses the same validation as
<a href="http://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#getByName-java.lang.String-"><code>InetAddress::getByName</code></a>.</p>
</dd>
<dt class="hdlist1"><a href="../log4j-core/apidocs/org/apache/logging/log4j/core/config/plugins/validation/constraints/ValidPort.html"><code>ValidPort</code></a></dt>
<dd>
<p>This annotation validates that a value corresponds to a valid port
number between 0 and 65535.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Converters">Converters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Converters are used by
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/layout/PatternLayout.html"><code>PatternLayout</code></a>
to render the elements identified by the conversion pattern. Every
converter must specify its category as "Converter" on the <code>@Plugin</code>
annotation, have a static <code>newInstance</code> method that accepts an array of
<code>String</code> as its only parameter and returns an instance of the
Converter, and must have a <code>@ConverterKeys</code> annotation present that
contains the array of converter patterns that will cause the Converter
to be selected. Converters that are meant to handle <code>LogEvent</code> must
extend the
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/layout/LogEventPatternConverter.html"><code>LogEventPatternConverter</code></a>
class and must implement a format method that accepts a <code>LogEvent</code> and a
<code>StringBuilder</code> as arguments. The Converter should append the result of
its operation to the <code>StringBuilder</code>.</p>
</div>
<div class="paragraph">
<p>A second type of Converter is the FileConverter - which must have
"FileConverter" specified in the category attribute of the <code>@Plugin</code>
annotation. While similar to a <code>LogEventPatternConverter</code>, instead of a
single format method these Converters will have two variations; one that
takes an <code>Object</code> and one that takes an array of <code>Object</code> instead of
the <code>LogEvent</code>. Both append to the provided <code>StringBuilder</code> in the same
fashion as a <code>LogEventPatternConverter</code>. These Converters are typically
used by the <code>RollingFileAppender</code> to construct the name of the file to
log to.</p>
</div>
<div class="paragraph">
<p>If multiple Converters specify the same <code>ConverterKeys</code>, then the load
order above determines which one will be used. For example, to override
the <code>%date</code> converter which is provided by the built-in
<code>DatePatternConverter</code> class, you would need to place your plugin in a
JAR file in the CLASSPATH ahead of <code>log4j-core.jar</code>. This is not
recommended; pattern ConverterKeys collisions will cause a warning to be
emitted. Try to use unique ConverterKeys for your custom pattern
converters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="KeyProviders">KeyProviders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some components within Log4j may provide the ability to perform data
encryption. These components require a secret key to perform the
encryption. Applications may provide the key by creating a class that
implements the
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/util/SecretKeyProvider.html"><code>SecretKeyProvider</code></a>
interface.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Lookups">Lookups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lookups are perhaps the simplest plugins of all. They must declare their
type as "Lookup" on the plugin annotation and must implement the
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/lookup/StrLookup.html"><code>StrLookup</code></a>
interface. They will have two methods; a <code>lookup</code> method that accepts a
<code>String</code> key and returns a <code>String</code> value and a second <code>lookup</code> method that
accepts both a <code>LogEvent</code> and a <code>String</code> key and returns a <code>String</code>. Lookups
may be referenced by specifying $\{name:key} where name is the name
specified in the Plugin annotation and key is the name of the item to
locate.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TypeConverters">TypeConverters</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/convert/TypeConverter.html"><code>TypeConverter</code></a>s
are a sort of meta-plugin used for converting strings into other types
in a plugin factory method parameter. Other plugins can already be
injected via the <code>@PluginElement</code> annotation; now, any type supported by
the type conversion system can be used in a <code>@PluginAttribute</code>
parameter. Conversion of enum types are supported on demand and do not
require custom <code>TypeConverter</code> classes. A large number of built-in Java
classes are already supported; see
<a href="../log4j-plugins/apidocs/org/apache/logging/log4j/plugins/convert/TypeConverters.html"><code>TypeConverters</code></a>
and
<a href="../log4j-core/apidocs/org/apache/logging/log4j/core/config/plugins/convert/CoreConverters.html"><code>CoreConverters</code></a>
for a more exhaustive listing.</p>
</div>
<div class="paragraph">
<p>Unlike other plugins, the plugin name of a <code>TypeConverter</code> is purely
cosmetic. Appropriate type converters are looked up via the <code>Type</code>
interface rather than via <code>Class&lt;?&gt;</code> objects only. Do note that
<code>TypeConverter</code> plugins must have a default constructor.</p>
</div>
<div class="paragraph">
<p>When multiple converters match for a type, the first will be returned.
If any extends from <code>Comparable&lt;TypeConverter&lt;?&gt;&gt;</code>, it will be used for determining the order.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DeveloperNotes">Developer Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a plugin class implements
<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html"><code>Collection</code></a>
or <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html"><code>Map</code></a>,
then no factory method is used. Instead, the class is instantiated using
the default constructor, and all child configuration nodes are added to
the <code>Collection</code> or <code>Map</code>.</p>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p align="center">Copyright &copy; 1999-2023 <a class="external" href="http://www.apache.org">The Apache Software Foundation</a>. All Rights Reserved.<br>
      Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
